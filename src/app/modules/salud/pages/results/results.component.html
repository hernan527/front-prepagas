<!-- ============== SECTION PAGETOP ============== -->
<!-- <app-hero-section></app-hero-section> -->
<!-- ============== SECTION PAGETOP END// ============== -->
<!-- ============== SECTION CONTENT ============== -->
<!-- <nx-small-stage class="nx-margin-bottom-m">
   <nx-link nxSmallStageHeader>
       <a (click)="false" href="#">
           <nx-icon name="arrow-left" aria-hidden="true"></nx-icon>
           Back to the shop
       </a>
   </nx-link>

   <p nxHeadline="subsection-xsmall" class="nx-margin-bottom-s">
       Topline text
   </p>
   <h2 nxHeadline="section">Headline text</h2>

   <nx-small-stage-image
       nxSmallStageImageStart
       src="../../../../../assets/images/small-stage-image-start.svg"
       fill
   ></nx-small-stage-image>
   <nx-small-stage-image
       nxSmallStageImageEnd
       src="../../../../../assets/images/small-stage-image-end.svg"
       fill
   ></nx-small-stage-image>
   <nx-small-stage-image
       nxSmallStageImageBottom
       src="../../../../../assets/images/small-stage-image-narrow-screen.svg"
       fill
   ></nx-small-stage-image>
</nx-small-stage> -->
<!-- 
<nx-small-stage class="nx-margin-bottom-m">
   <nav aria-label="Breadcrumb" nxSmallStageHeader>
       <ol nxBreadcrumb>
           <li><a href="#" nxBreadcrumbItem>Home</a></li>
           <li><a href="#" nxBreadcrumbItem>Insurance</a></li>
           <li><a href="#" nxBreadcrumbItem>Health Insurance</a></li>
       </ol>
   </nav>

   <p nxCopytext="large" class="nx-margin-bottom-s">
       Lorem ipsum dolor sit amet, consectetuer adipiscing elit.
   </p>
   <h2 nxHeadline="section">
       Lorem ipsum dolor sit amet, consetetur sadipscing
       <span class="highlighted">sed diam nonumy eirmod tempor</span>
   </h2>

   <nx-small-stage-image
       nxSmallStageImageStart
       src="../../../../../assets/images/small-stage-image-start.svg"
       fill
   ></nx-small-stage-image>
   <nx-small-stage-image
       nxSmallStageImageEnd
       src="../../../../../assets/images/small-stage-image-end.svg"
       fill
   ></nx-small-stage-image>
   <nx-small-stage-image
       nxSmallStageImageBottom
       src="../../../../../assets/images/small-stage-image-narrow-screen.svg"
       fill
   ></nx-small-stage-image>
</nx-small-stage> -->
<app-banner-health></app-banner-health>
<app-search-form
   [isSmallScreen]="isSmallScreen"
   ></app-search-form>
<section class="container">
   <!-- <div *ngIf="isSmallScreen" class="d-flex flex-column justify-content-center surface-card p-2 shadow-2 border-round hidden form-sticky" style="background-color: rgba(255, 215, 0, 0.6); margin: 0 0 0 0; align-items: center; animation: shake 0.5s ease-in-out;">
      <div class="ztext-lg font-medium text-600 mb-2"><strong>Paso 1:</strong> Ingresa tu <strong>edad</strong> para calcular precios exactos y obtener los mejores planes</div>
      <button pButton pRipple type="button" label="Completar Perfil" class="p-button-raised p-button-danger" (click)="openModa('custom-modal-3')" style="animation: aura 0.5s ease-in-out;"></button>
      </div>  -->
   <div class="content">
      <header class="d-flex flex-wrap align-items-center border-bottom mb-4 pb-3 w-100">
         <div _ngcontent-ng-c1250167330="" _nghost-ng-c1654105987="" class="d-flex align-items-center justify-content-between w-100 flex-nowrap">
           
            <div class="d-flex align-items-center ml-auto">
               <!-- <button _ngcontent-ng-c1993997668="" class="nota btn d-none d-md-block mr-2">¿Qué es el Puntaje?</button> -->
               <!-- <div   class="header d-flex ml-3 pl-2 ng-star-inserted">
                  <div class="d-flex flex-wrap justify-content-between surface-card p-2 shadow-2 border-round w-100" 
                     style="background-color: whitesmoke; margin: 0 5px 5px 5px; align-items: center;">
                     <div class="d-flex flex-wrap align-items-center w-100 mt-3 mt-md-0">
                        <div class="d-flex flex-wrap">
                           <div class="d-flex align-items-center me-2 flex-grow-1" style="min-width: 200px;">
                              <label class="me-2">Ordenar por</label>
                              <select class="form-select w-100" [formControl]="SortbyParamControl" (click)="onSortDirection()">
                              <option value="empresa">Empresa</option>
                              <option value="precio">Precio</option>
                              <option value="name">Nombre</option>
                              <option value="rating">Rating</option>
                              </select>
                           </div>
                        </div>
                     </div>
                     <div> </div>
                  </div>
                  <button type="button" (click)="onSortDirection()" class="btn btn-light">
                  <i *ngIf="SortDirection === 'asc'" class="fas fa-sort-alpha-down-alt fa-lg"></i>
                  <i *ngIf="SortDirection === 'desc'" class="fas fa-sort-alpha-up-alt fa-lg"></i>
                  </button>
               </div> -->

            </div>
         </div>


         <div  class="mb-3 d-flex justify-content-end"></div>
         <div class="d-flex flex-wrap">

            
         </div>
            <nx-toolbar class="nx-margin-bottom-s">
         <div class="d-flex align-items-center count">
            <kbd class="py-1 px-2" style="background-color: rgb(64, 180, 229);">{{definirLength()}}</kbd>
            <div class="ml-2">
               <span qptranslate="compare.header.results" class="mb-0" style="color: rgb(64, 180, 229);">Resultados</span>
            </div>
         </div>
     
         <nx-toolbar-divider></nx-toolbar-divider>
     
         <div class="nx-toolbar-description">
            <p-autoComplete
            styleClass="myClass"
            [(ngModel)]="selectedClinica"
            [suggestions]="items"
            (completeMethod)="search($event)"
            [minLength]="1"
            field="nombre"
            placeholder="Buscar Clínicas..."
            [multiple]="true"
            (ngModelChange)="onSelectedItemsChange($event)"
            >
            <!-- Plantilla para la lista de opciones -->
            <ng-template let-option pTemplate="custom-chip">
               <nx-formfield label="Textarea with autoresizing">
                  <textarea nxInput cdkTextareaAutosize class="custom-chip"><span>{{ option.entity }}</span></textarea>
              </nx-formfield>
              
                          
            
            </ng-template>
            <!-- Plantilla para los chips -->
            <ng-template let-item pTemplate="chip">
             
               <nx-formfield>
                  <textarea nxInput cdkTextareaAutosize class="custom-chip">{{ item.nombre }}</textarea>
              </nx-formfield>
            </ng-template>
            </p-autoComplete>
         </div>
     

     
       
         <ng-container
         *ngIf="!isSmallScreen"
         >
            <nx-radio-toggle
            *ngIf="!isSmallScreen"
            >
               <nx-radio-toggle-button value="grid" ariaLabel="Favorites" (click)="view = 'grid';">
                  <mat-icon role="img" class="mat-icon notranslate material-icons">grid_on</mat-icon>
               </nx-radio-toggle-button>
               <nx-radio-toggle-button value="list" ariaLabel="Warnings" (click)="view = 'list';">
                  <mat-icon role="img" class="mat-icon notranslate material-icons">list</mat-icon>
               </nx-radio-toggle-button>
               
           </nx-radio-toggle>
           
           </ng-container>
     </nx-toolbar>
      </header>

     
      <!-- Contenido principal aquí -->
      <div class="row">
         <div class="col-lg-3">
            <nx-sidebar
            *ngIf="sidebarVisible"
            resizeHandleAriaLabel="Toggle sidebar width"
            class="my-sidebar"
            [ngClass]="{'sidebar-overlay': isSmallScreen}"
            #sidebar
        >
          <app-filters-products
            [isSmallScreen]="isSmallScreen"
            [product]="products"
            [sidebarVisible]="sidebarVisible"
            [anchoSidebar]="anchoSidebar"
            [productosFiltrados]="productosFiltrados"
            (sidebarStateChanged)="onSidebarStateChanged($event)"
          ></app-filters-products>
        </nx-sidebar>
        
    
         </div>
         
         <main class="col-lg-9  g-2">
            <ng-container *ngIf="!(loading$ | async); else loadingTpl">
               <!-- ========= content items ========= -->
               <div class="row ">
                  <ng-container *ngIf="isLoaded" >
                     <ng-container *ngIf="view === 'grid' || isSmallScreen">
                        <div class="items col-lg-4 col-md-4 col-sm-6 mb-2"  *ngFor="let product of getPagedData() | filter: SearchEmpresa:'empresa' | sort: [SortbyParam, SortDirection]">
                           <app-product-card 
                           [product]="product"
                           [compareList]="compareList"
                           (showProduct)="onShowDetail($event)"
                           >
                           </app-product-card>
                        </div>
                     </ng-container>
                     <ng-container *ngIf="view === 'list' && !isSmallScreen">
                        <div class="items" *ngFor="let product of getPagedData() | filter: SearchEmpresa:'empresa'  |  sort: [SortbyParam, SortDirection]" >
                           <app-product-land 
                           [product]="product"
                           [compareList]="compareList"
                           (showProduct)="onShowDetail($event)"
                           >
                           </app-product-land>
                        </div>
                     </ng-container>
                  </ng-container>
                  <div *ngFor="let product of products"  class="col-lg-4 col-md-6 col-sm-6 ">
                     <div class="custom-skeleton p-4" *ngIf="!isLoaded" >
                        <div class="flex mb-3">
                           <p-skeleton shape="circle" size="4rem" styleClass="mr-2"></p-skeleton>
                           <div>
                              <p-skeleton width="10rem" styleClass="mb-2"></p-skeleton>
                              <p-skeleton width="5rem" styleClass="mb-2"></p-skeleton>
                              <p-skeleton height=".5rem"></p-skeleton>
                           </div>
                        </div>
                        <p-skeleton width="100%" height="150px"></p-skeleton>
                        <div class="flex justify-content-between mt-3">
                           <p-skeleton width="4rem" height="2rem"></p-skeleton>
                           <p-skeleton width="4rem" height="2rem"></p-skeleton>
                        </div>
                     </div>
                  </div>
               </div>
               <div >
                  <!-- Paginación -->
                   <ng-container *ngIf="isSmallScreen != true hide">
                  <nav class="pt-4" aria-label="Page navigation">
                     <ul class="pagination justify-content-center">
                        <!-- Botón para ir a la primera página -->
                        <li class="page-item" [class.disabled]="currentPage === 1">
                           <a class="page-link fw-bolder text-uppercase" (click)="goToFirstPage()" aria-disabled="currentPage === 1">Primera</a>
                        </li>
                        <!-- Botón para ir a la página anterior -->
                        <li class="page-item" [class.disabled]="currentPage === 1">
                           <a class="page-link fw-bolder text-uppercase" (click)="prevPage()" aria-disabled="currentPage === 1">Anterior</a>
                        </li>
                        <!-- Páginas -->
                        <li class="page-item" [class.active]="page === currentPage" *ngFor="let page of getPaginationArray()">
                        <a class="page-link" (click)="goToPage(page)">{{ page }}</a>
                        </li>
                        <!-- Botón para ir a la página siguiente -->
                        <li class="page-item" [class.disabled]="currentPage === getTotalPages()">
                           <a class="page-link fw-bolder text-uppercase" (click)="nextPage()" aria-disabled="currentPage === getTotalPages()">Siguiente</a>
                        </li>
                        <!-- Botón para ir a la última página -->
                        <li class="page-item" [class.disabled]="currentPage === getTotalPages()">
                           <a class="page-link fw-bolder text-uppercase" (click)="goToLastPage()" aria-disabled="currentPage === getTotalPages()">Última</a>
                        </li>
                        <!-- Selector de productos por página -->
                        <li class="page-item">
                           <select class="form-select" [(ngModel)]="itemsPerPage" (change)="onItemsPerPageChange($event)">
                           <option *ngFor="let option of itemsPerPageOptions" [value]="option">{{ option }} por página</option>
                           </select>
                        </li>
                     </ul>
                  </nav>
               </ng-container>

               </div>
               <!-- <hr> -->
            </ng-container>
         </main>
      </div>
   </div>
   <!--Spinner-->
   <ng-template #loadingTpl>
      <div class="progress">
         <div class="indeterminate"></div>
         sty
      </div>
   </ng-template>
   <!-- s -->
   <!-- <p-sidebar [(visible)]="sidebarVisible" [style]="{ 'width': anchoSidebar }"> -->
   <!-- <app-filters-products [product]="products" ></app-filters-products> -->
   <!-- <app-filters-products
      [isSmallScreen]="isSmallScreen"
      [products]="products"
      
      ></app-filters-products> -->
   <!-- </p-sidebar> -->
   <!-- Botón para activar el sidebar en dispositivos móviles -->


   <!-- <button class="mobile-filters-button p-button p-button-raised" (click)="sidebarVisible = true;sidebar()">
      <i class="pi pi-filter"></i> Filtros
      </button> -->

      
   <!--         <jw-modal id='custom-modal-3' >
      <app-form-queplan>  <button type="button" class="btn" (click)="closeModa('custom-modal-3')">Cerrar</button>
      </app-form-queplan>
      </jw-modal> -->
</section>
<!--       <div class="card flex justify-content-center">
   <p-button (click)="showDialog()" icon="pi pi-external-link" label="Show"></p-button>
   <p-dialog header="Header" [(visible)]="visible" [style]="{ width: '50vw' }">
       <div class="flex py-2 justify-content-center">
         <body class="theme" >
           <app-form-quote></app-form-quote>
       
           
           <p-dropdown appendTo="body" [options]="cities" [(ngModel)]="selectedCity" placeholder="Select a City" optionLabel="name"></p-dropdown>
       </div>
   </p-dialog>
   </div>
   -->
<ng-container *ngIf='compareProdList().length >= 1 show' >
   <div id="mybutton" >
      <button class="feedback" mat-raised-button color="primary"
         matBadge matBadgePosition="after" matBadgeColor="accent" >
         <app-carrito-compara ></app-carrito-compara>
         <span class="close" (click)="vaciarCompareProdList()" style="position: absolute; top: 5px; right: 5px; font-size: 20px; ">x</span>
      </button>
   </div>
</ng-container>

<ng-container *ngIf="isSmallScreen" >
   <div id="buttonShowFilters" >
      <button class="feedback" mat-raised-button color="primary"
         matBadge matBadgePosition="after" matBadgeColor="accent" (click)="toggleSidebar();" >
         <mat-icon>filter_list</mat-icon>
      </button>
   
   </div>
</ng-container>


<p-dialog [(visible)]="visible" id="form" styleClass="disable-scroll" [responsive]="true">
   <div class="flex py-2 justify-content-center">
       <body class="ui-dialog-content ui-widget-content theme ">
           <!-- <app-formulario></app-formulario> -->
           <app-natural-language-form></app-natural-language-form>

       </body>
   </div>
</p-dialog>


<div class="product-detail" [class.active]="showProductDetail">
   {{ statusDetail}}
     <div *ngIf="productChosen">
         <button (click)="toggleProductDetail()">Close</button>
         <h1>{{productChosen.name}}</h1>
         `
     <swiper-container
       [slidesPerView]="1">
       <ng-template swiperSlide *ngFor="let img of productChosen.images">
         <img [src]="img" alt="">
       </ng-template>
 
     </swiper-container>
   `,
         <h1>{{productChosen.empresa}}</h1>

 
     </div> 
 </div>    





           