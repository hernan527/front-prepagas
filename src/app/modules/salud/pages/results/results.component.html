<!-- ============== SECTION PAGETOP ============== -->
<!-- <app-hero-section></app-hero-section> -->
<!-- ============== SECTION PAGETOP END// ============== -->
<!-- ============== SECTION CONTENT ============== -->


<section>
   <!-- <div *ngIf="isSmallScreen" class="d-flex flex-column justify-content-center surface-card p-2 shadow-2 border-round hidden form-sticky" style="background-color: rgba(255, 215, 0, 0.6); margin: 0 0 0 0; align-items: center; animation: shake 0.5s ease-in-out;">
      <div class="ztext-lg font-medium text-600 mb-2"><strong>Paso 1:</strong> Ingresa tu <strong>edad</strong> para calcular precios exactos y obtener los mejores planes</div>
      <button pButton pRipple type="button" label="Completar Perfil" class="p-button-raised p-button-danger" (click)="openModa('custom-modal-3')" style="animation: aura 0.5s ease-in-out;"></button>
      </div>  -->

  

      <!-- Contenido principal aquí -->
   
      <nx-sidebar
       *ngIf="sidebarVisible"
      resizeHandleAriaLabel="Toggle sidebar width"
      class="my-sidebar"
      #sidebar
> <app-filters-products
[product]="products"
[sidebarVisible]="sidebarVisible"
[anchoSidebar]="anchoSidebar"
[productosFiltrados]="productosFiltrados"
></app-filters-products></nx-sidebar>

         <main>
            <ng-container *ngIf="!(loading$ | async); else loadingTpl">
               <!-- ========= content items ========= -->
               <div class="row ">
                  <ng-container *ngIf="isLoaded" >
                     <ng-container *ngIf="isSmallScreen">
                        <div nxLayout="grid" class="grid-container">
                           <div nxRow>
                        <div class="items" nxCol="" *ngFor="let product of getPagedData() | filter: SearchEmpresa:'empresa' | sort: [SortbyParam, SortDirection]">
                           <app-card-grid
                           [product]="product"
                           [compareList]="compareList"
                           (showProduct)="onShowDetail($event)"
                         ></app-card-grid>
                        </div>
                     </div>
                  </div>
                     </ng-container>
                     <ng-container *ngIf="!isSmallScreen">
                        <div class="items" *ngFor="let product of getPagedData() | filter: SearchEmpresa:'empresa'  |  sort: [SortbyParam, SortDirection]" >
                         <app-card-land
                           [product]="product"
                           [compareList]="compareList"
                           (showProduct)="onShowDetail($event)"
                         ></app-card-land>
                           <!-- <app-product-land 
                           [product]="product"
                           [compareList]="compareList"
                           (showProduct)="onShowDetail($event)"
                           >
                           </app-product-land> -->
                        </div>
                     </ng-container>
                  </ng-container>
                  <div *ngFor="let product of products"  class="col-lg-4 col-md-6 col-sm-6 ">
                     <div class="custom-skeleton p-4" *ngIf="!isLoaded" >
                        <div class="flex mb-3">
                           <p-skeleton shape="circle" size="4rem" styleClass="mr-2"></p-skeleton>
                           <div>
                              <p-skeleton width="10rem" styleClass="mb-2"></p-skeleton>
                              <p-skeleton width="5rem" styleClass="mb-2"></p-skeleton>
                              <p-skeleton height=".5rem"></p-skeleton>
                           </div>
                        </div>
                        <p-skeleton width="100%" height="150px"></p-skeleton>
                        <div class="flex justify-content-between mt-3">
                           <p-skeleton width="4rem" height="2rem"></p-skeleton>
                           <p-skeleton width="4rem" height="2rem"></p-skeleton>
                        </div>
                     </div>
                  </div>
               </div>
               <div >
                  <!-- Paginación -->
                   <ng-container  hide>
                  <nav class="pt-4" aria-label="Page navigation">
                     <ul class="pagination justify-content-center">
                        <!-- Botón para ir a la primera página -->
                        <li class="page-item" [class.disabled]="currentPage === 1">
                           <a class="page-link fw-bolder text-uppercase" (click)="goToFirstPage()" aria-disabled="currentPage === 1">Primera</a>
                        </li>
                        <!-- Botón para ir a la página anterior -->
                        <li class="page-item" [class.disabled]="currentPage === 1">
                           <a class="page-link fw-bolder text-uppercase" (click)="prevPage()" aria-disabled="currentPage === 1">Anterior</a>
                        </li>
                        <!-- Páginas -->
                        <li class="page-item" [class.active]="page === currentPage" *ngFor="let page of getPaginationArray()">
                        <a class="page-link" (click)="goToPage(page)">{{ page }}</a>
                        </li>
                        <!-- Botón para ir a la página siguiente -->
                        <li class="page-item" [class.disabled]="currentPage === getTotalPages()">
                           <a class="page-link fw-bolder text-uppercase" (click)="nextPage()" aria-disabled="currentPage === getTotalPages()">Siguiente</a>
                        </li>
                        <!-- Botón para ir a la última página -->
                        <li class="page-item" [class.disabled]="currentPage === getTotalPages()">
                           <a class="page-link fw-bolder text-uppercase" (click)="goToLastPage()" aria-disabled="currentPage === getTotalPages()">Última</a>
                        </li>
                        <!-- Selector de productos por página -->
                        <li class="page-item">
                           <select class="form-select" [(ngModel)]="itemsPerPage" (change)="onItemsPerPageChange($event)">
                           <option *ngFor="let option of itemsPerPageOptions" [value]="option">{{ option }} por página</option>
                           </select>
                        </li>
                     </ul>
                  </nav>
               </ng-container>

               </div>
               <!-- <hr> -->
            </ng-container>
         </main>
  



   <!--Spinner-->
 
</section>
<!--       <div class="card flex justify-content-center">
   <p-button (click)="showDialog()" icon="pi pi-external-link" label="Show"></p-button>
   <p-dialog header="Header" [(visible)]="visible" [style]="{ width: '50vw' }">
       <div class="flex py-2 justify-content-center">
         <body class="theme" >
           <app-form-quote></app-form-quote>
       
           
           <p-dropdown appendTo="body" [options]="cities" [(ngModel)]="selectedCity" placeholder="Select a City" optionLabel="name"></p-dropdown>
       </div>
   </p-dialog>
   </div>
   -->
   <ng-container *ngIf="compareProdList().length >= 1">

   <div id="mybutton" >
      <button class="feedback" mat-raised-button color="primary"
         matBadge matBadgePosition="after" matBadgeColor="accent" >
         <app-carrito-compara ></app-carrito-compara>
         <span class="close" (click)="vaciarCompareProdList()" style="position: absolute; top: 5px; right: 5px; font-size: 20px; ">x</span>
      </button>
   </div>
</ng-container>

<ng-container *ngIf="isSmallScreen" >
   <div id="buttonShowFilters" >
      <button class="feedback" mat-raised-button color="primary"
         matBadge matBadgePosition="after" matBadgeColor="accent" (click)="toggleSidebar();" >
         <mat-icon>filter_list</mat-icon>
      </button>
   
   </div>
</ng-container>


<p-dialog [(visible)]="visible" id="form" styleClass="disable-scroll" [responsive]="true">
   <div class="flex py-2 justify-content-center">
       <body class="ui-dialog-content ui-widget-content theme ">
           <app-formulario></app-formulario>
       </body>
   </div>
</p-dialog>


<div class="product-detail" [class.active]="showProductDetail">
   {{ statusDetail}}
     <div *ngIf="productChosen">
         <button (click)="toggleProductDetail()">Close</button>
         <h1>{{productChosen.name}}</h1>
         `
     <swiper-container
       [slidesPerView]="1">
       <ng-template swiperSlide *ngFor="let img of productChosen.images">
         <img [src]="img" alt="">
       </ng-template>
 
     </swiper-container>
   `,
         <h1>{{productChosen.empresa}}</h1>
    <button (click)="updateProduct()">editar</button>
    <button (click)="deleteProduct()">eliminar</button>
 
     </div> 
 </div>    